<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <title>Movies - Servo</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../../static/css/user/movies.css">



</head>
<body>
    <div class="app-container">
        <!-- Sidebar Navigation -->
        {% include 'user/components/sidebar.html' %}

        <!-- Main Content -->
        <main class="main-content">
            <div class="content-wrapper">
                <!-- Header -->
                <div class="header">
                    <h1 class="page-title">Movies library</h1>
                    <div class="search-container">
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="search-icon">
                            <path d="m21 21-4.34-4.34"></path>
                            <circle cx="11" cy="11" r="8"></circle>
                        </svg>
                        <input type="text" id="searchInput" class="search-input tv-focus" placeholder="Search movies...">
                    </div>
                </div>

                <!-- Category Filter -->
                <div class="category-filter">
                    <button class="category-btn tv-focus active" data-category="all">All</button>
                    <button class="category-btn tv-focus" data-category="action">Action</button>
                    <button class="category-btn tv-focus" data-category="comedy">Comedy</button>
                    <button class="category-btn tv-focus" data-category="drama">Drama</button>
                    <button class="category-btn tv-focus" data-category="horror">Horror</button>
                    <button class="category-btn tv-focus" data-category="scifi">Sci-Fi</button>
                </div>

                <!-- Movies Grid -->
                <div class="movies-grid" id="moviesGrid">
                    <!-- Movie cards will be generated by JavaScript -->
                </div>
            </div>
        </main>
    </div>

    <script>
                // Movies data
        const moviesData = [
            { id: 1, title: 'The Dark Knight', rating: 7.8, year: 2022, category: 'action', quality: 'HD', image: 'https://picsum.photos/300/450?random=200' },
            { id: 2, title: 'Inception', rating: 9.1, year: 2023, category: 'scifi', quality: 'HD', image: 'https://picsum.photos/300/450?random=201' },
            { id: 3, title: 'Interstellar', rating: 7.6, year: 2022, category: 'scifi', quality: 'HD', image: 'https://picsum.photos/300/450?random=202' },
            { id: 4, title: 'Avengers: Endgame', rating: 8.6, year: 2020, category: 'action', quality: 'HD', image: 'https://picsum.photos/300/450?random=203' },
            { id: 5, title: 'The Matrix', rating: 7.8, year: 2024, category: 'scifi', quality: 'HD', image: 'https://picsum.photos/300/450?random=204' },
            { id: 6, title: 'Gladiator', rating: 7.8, year: 2024, category: 'action', quality: 'HD', image: 'https://picsum.photos/300/450?random=205' },
            { id: 7, title: 'Titanic', rating: 8.0, year: 2023, category: 'drama', quality: 'HD', image: 'https://picsum.photos/300/450?random=206' },
            { id: 8, title: 'Avatar', rating: 8.2, year: 2022, category: 'scifi', quality: 'HD', image: 'https://picsum.photos/300/450?random=207' },
            { id: 9, title: 'The Godfather', rating: 7.7, year: 2021, category: 'drama', quality: 'HD', image: 'https://picsum.photos/300/450?random=208' },
            { id: 10, title: 'Pulp Fiction', rating: 8.8, year: 2022, category: 'drama', quality: 'HD', image: 'https://picsum.photos/300/450?random=209' },
            { id: 11, title: 'Fight Club', rating: 7.7, year: 2020, category: 'drama', quality: 'HD', image: 'https://picsum.photos/300/450?random=210' },
            { id: 12, title: 'Forrest Gump', rating: 8.8, year: 2022, category: 'drama', quality: 'HD', image: 'https://picsum.photos/300/450?random=211' },
            { id: 13, title: 'The Lion King', rating: 8.1, year: 2021, category: 'comedy', quality: 'HD', image: 'https://picsum.photos/300/450?random=212' },
            { id: 14, title: 'Joker', rating: 8.6, year: 2024, category: 'drama', quality: 'HD', image: 'https://picsum.photos/300/450?random=213' },
            { id: 15, title: 'Black Panther', rating: 7.8, year: 2020, category: 'action', quality: 'HD', image: 'https://picsum.photos/300/450?random=214' },
            { id: 16, title: 'Frozen', rating: 9.1, year: 2021, category: 'comedy', quality: 'HD', image: 'https://picsum.photos/300/450?random=215' },
            { id: 17, title: 'Toy Story', rating: 7.7, year: 2022, category: 'comedy', quality: 'HD', image: 'https://picsum.photos/300/450?random=216' },
            { id: 18, title: 'Spider-Man: No Way Home', rating: 9.2, year: 2020, category: 'action', quality: 'HD', image: 'https://picsum.photos/300/450?random=217' },
            { id: 19, title: 'Breaking Bad', rating: 9.2, year: 2023, category: 'drama', quality: 'HD', image: 'https://picsum.photos/300/450?random=218' },
            { id: 20, title: 'Stranger Things', rating: 7.7, year: 2022, category: 'horror', quality: 'HD', image: 'https://picsum.photos/300/450?random=219' },
            { id: 21, title: 'Game of Thrones', rating: 9.5, year: 2021, category: 'drama', quality: 'HD', image: 'https://picsum.photos/300/450?random=220' },
            { id: 22, title: 'The Crown', rating: 8.1, year: 2022, category: 'drama', quality: 'HD', image: 'https://picsum.photos/300/450?random=221' },
            { id: 23, title: 'The Mandalorian', rating: 7.5, year: 2022, category: 'scifi', quality: 'HD', image: 'https://picsum.photos/300/450?random=222' },
            { id: 24, title: 'The Witcher', rating: 9.4, year: 2021, category: 'action', quality: 'HD', image: 'https://picsum.photos/300/450?random=223' },
            { id: 25, title: 'Friends', rating: 8.9, year: 2021, category: 'comedy', quality: 'HD', image: 'https://picsum.photos/300/450?random=224' },
            { id: 26, title: 'The Office', rating: 9.2, year: 2021, category: 'comedy', quality: 'HD', image: 'https://picsum.photos/300/450?random=225' }
        ];

        // State management
        let currentCategory = 'all';
        let searchQuery = '';

        // DOM elements
        const moviesGrid = document.getElementById('moviesGrid');
        const categoryButtons = document.querySelectorAll('.category-btn');
        const searchInput = document.getElementById('searchInput');

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            renderMovies(moviesData);
            setupEventListeners();
            setupKeyboardNavigation();
        });

        /**
        * Setup event listeners
        */
        function setupEventListeners() {
            // Category filter
            categoryButtons.forEach(btn => {
                btn.addEventListener('click', (e) => handleCategoryChange(e));
            });

            // Search
            searchInput.addEventListener('input', (e) => handleSearch(e));
        }

        /**
        * Handle category change
        */
        function handleCategoryChange(event) {
            const btn = event.target.closest('.category-btn');
            if (!btn) return;

            currentCategory = btn.dataset.category;

            // Update active state
            categoryButtons.forEach(b => b.classList.remove('active'));
            btn.classList.add('active');

            // Filter movies
            filterMovies();
        }

        /**
        * Handle search input
        */
        function handleSearch(event) {
            searchQuery = event.target.value.toLowerCase();
            filterMovies();
        }

        /**
        * Filter movies based on category and search
        */
        function filterMovies() {
            let filtered = moviesData;

            // Filter by category
            if (currentCategory !== 'all') {
                filtered = filtered.filter(movie => movie.category === currentCategory);
            }

            // Filter by search query
            if (searchQuery) {
                filtered = filtered.filter(movie =>
                    movie.title.toLowerCase().includes(searchQuery)
                );
            }

            renderMovies(filtered);
        }

        /**
        * Render movies to grid
        */
        function renderMovies(movies) {
            moviesGrid.innerHTML = '';

            if (movies.length === 0) {
                moviesGrid.innerHTML = '<p class="no-results">No movies found</p>';
                return;
            }

            movies.forEach((movie, index) => {
                const card = createMovieCard(movie, index);
                moviesGrid.appendChild(card);
            });
        }

        /**
        * Create movie card element
        */
        function createMovieCard(movie, index) {
            const card = document.createElement('button');
            card.className = 'movie-card tv-focus';
            card.tabIndex = index;
            card.dataset.movieId = movie.id;

            card.innerHTML = `
                <img src="${movie.image}" alt="${movie.title}" class="movie-image">
                <div class="new-badge">NEW</div>
                <div class="movie-info">
                    <div class="movie-info-content">
                        <h3 class="movie-title">${movie.title}</h3>
                        <div class="movie-meta">
                            <span class="rating">
                                <svg viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z"></path>
                                </svg>
                                ${movie.rating}
                            </span>
                            <span>•</span>
                            <span>${movie.year}</span>
                            <span>•</span>
                            <span class="quality-badge">${movie.quality}</span>
                        </div>
                        <div class="movie-actions">
                            <button class="play-btn" onclick="playMovie(event, ${movie.id})">
                                <svg viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z"></path>
                                </svg>
                                PLAY
                            </button>
                        </div>
                    </div>
                </div>
            `;

            // Click handler for card selection
            card.addEventListener('click', () => {
                console.log(`Selected movie: ${movie.title}`);
            });

            return card;
        }

        /**
        * Play movie
        */
        function playMovie(event, movieId) {
            event.stopPropagation();
            const movie = moviesData.find(m => m.id === movieId);
            if (movie) {
                console.log(`Playing: ${movie.title}`);
                // Here you would typically navigate to a player or open a modal
            }
        }

        /**
        * Setup keyboard navigation for TV remote
        */
        function setupKeyboardNavigation() {
            document.addEventListener('keydown', (e) => handleKeyboardNavigation(e));
        }

        /**
        * Handle keyboard navigation (TV remote support)
        */
        function handleKeyboardNavigation(event) {
            const focusedElement = document.activeElement;

            switch(event.key) {
                case 'ArrowUp':
                    event.preventDefault();
                    moveFocus(focusedElement, 'up');
                    break;
                case 'ArrowDown':
                    event.preventDefault();
                    moveFocus(focusedElement, 'down');
                    break;
                case 'ArrowLeft':
                    event.preventDefault();
                    moveFocus(focusedElement, 'left');
                    break;
                case 'ArrowRight':
                    event.preventDefault();
                    moveFocus(focusedElement, 'right');
                    break;
                case 'Enter':
                    event.preventDefault();
                    if (focusedElement && focusedElement.classList.contains('movie-card')) {
                        focusedElement.click();
                    }
                    break;
            }
        }

        /**
        * Move focus based on direction
        */
        function moveFocus(current, direction) {
            const focusableElements = document.querySelectorAll('.tv-focus');
            const focusableArray = Array.from(focusableElements);
            const currentIndex = focusableArray.indexOf(current);

            if (currentIndex === -1) {
                focusableArray[0]?.focus();
                return;
            }

            let nextIndex = currentIndex;

            switch(direction) {
                case 'up':
                case 'left':
                    nextIndex = (currentIndex - 1 + focusableArray.length) % focusableArray.length;
                    break;
                case 'down':
                case 'right':
                    nextIndex = (currentIndex + 1) % focusableArray.length;
                    break;
            }

            focusableArray[nextIndex]?.focus();
        }

        /**
        * Utility: Log to console
        */
        function log(message) {
            console.log(`[Movies App] ${message}`);
        }

    </script>
</body>
</html>
